{% extends 'base.html' %}
{% load static %}

{% block title %}Results{% endblock %}

{% block content%}
<header>
    {% include 'partials/_navbar.html' %}
</header>
<main class="container-fluid">
    <div class="row justify-content-center">
    <div class="col-auto">
        <h1 class="mt-4 text-center">User Results</h1>
    {% if riasec_result or personalityTest_result %}
    <h2 class="mt-4">RIASEC</h2>
    <table class="table align-middle table-striped table-hover table-responsive-lg">
        <thead class="table-dark">
        <tr>
            <th>User ID</th>
            <th>User</th>
            <th>Realistic</th>
            <th>Investigative</th>
            <th>Artistic</th>
            <th>Social</th>
            <th>Enterprising</th>
            <th>Conventional</th>
            <th>Date Created</th>
        </tr>
        </thead>
        {% for result in riasec_result %}
        <tr data-href=" {% url 'accounts:user_detail' result.user result.pk %} ">
            <td>{{ result.id }}</td>
            <td>{{ result.user|capfirst }}</td>
            <td>{{ result.realistic|floatformat:1 }}</td>
            <td>{{ result.investigative|floatformat:1 }}</td>
            <td>{{ result.artistic|floatformat:1 }}</td>
            <td>{{ result.social|floatformat:1 }}</td>
            <td>{{ result.enterprising|floatformat:1 }}</td>
            <td>{{ result.conventional|floatformat:1 }}</td>
            <td>{{ result.date_created }}</td>
        </tr>
        {% endfor %}
    </table>
        <h2 class="mt-5">Personality Test</h2>
    <table class="table align-middle table-striped table-hover table-responsive-xl">
        <thead class="table-dark">
        <tr>
            <th>ID</th>
            <th>User</th>
            <th>Extroversion</th>
            <th>Neurotic</th>
            <th>Agreeable</th>
            <th>Conscientious</th>
            <th>Openness</th>
            <th>Prediction</th>
            <th>Date Created</th>
        </tr>
        </thead>
         {% for result in personalityTest_result %}
        <tr data-href="{% url 'accounts:user_detail' result.user result.pk %}">
            <td>{{ result.id }}</td>
            <td>{{ result.user|capfirst }}</td>
            <td>{{ result.extroversion }}</td>
            <td>{{ result.neurotic }}</td>
            <td>{{ result.agreeable }}</td>
            <td>{{ result.conscientious }}</td>
            <td>{{ result.openness }}</td>
            <td>{{ result.prediction }}</td>
            <td>{{ result.date_created }}</td>
        </tr>
        {% endfor %}
    </table>
    {% endif %}

    </div>
    </div>
</main>

<script>
    document.addEventListener("DOMContentLoaded", () =>{
        const rows = document.querySelectorAll("tr[data-href]");
            rows.forEach(row =>{
                row.addEventListener("click", () => {
                window.location.href = row.dataset.href;
            });
        });
    });
</script>
{% endblock %}